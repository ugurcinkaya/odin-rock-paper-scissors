<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>

<body>
    <script>

        const choices = ["rock", "paper", "scissors"]
        let playerScore = 0;
        let computerScore = 0;
        let roundNumber = 0;

        function game() {

            let playerSelection = prompt("Please type rock, paper or scissors");
            let computerSelection = getComputerChoice();

            if (!choices.includes(playerSelection)) {
                let playerSelection = prompt("Please type rock, paper or scissors")
            }

            function getComputerChoice() {
                return choices[Math.floor(Math.random() * choices.length)];
            }

            function playRound(playerSelection, computerSelection) {
                if (playerSelection === computerSelection) {
                    console.log("Game is a tie.");
                } else if (
                    (playerSelection === "rock" && computerSelection === "scissors") ||
                    (playerSelection === "scissors" && computerSelection === "paper") ||
                    (playerSelection === "paper" && computerSelection === "rock")
                ) {
                    console.log(`You win!${playerSelection} beats ${computerSelection}.`);
                    playerScore++;
                } else {
                    console.log(`You lose! ${computerSelection} beats ${playerSelection}.`)
                    computerScore++;
                }
                roundNumber ++;
                console.log(roundNumber);
            }
            playRound(playerSelection, computerSelection);
        }
        for (let i = 0; i < 5; i++) {
            game();          
        }

        if(roundNumber === 5 && playerScore > computerScore) {
                console.log("You win the game!")
            }else if(roundNumber === 5 && playerScore < computerScore){
                console.log("You lose the game!")
            }else {
                console.log("Nobody won! Game is a tie.")
            }
    </script>
</body>

</html>